<div class="analysis-form">
  <form [formGroup]="bacteriologyForm" (ngSubmit)="submitForm()">
    <div class="analysis-form-fields">
      
      <div class="analysis-form-field">
        <label for="date">Date:</label>
        <input id="date" type="date" formControlName="date">
      </div>

      <div class="analysis-form-field">
        <label for="type">Type:</label>
        <select id="type" formControlName="type">
          <option *ngFor="let type of bacteriologyTypes" [ngValue]="type.id">{{ type.name }}</option>
        </select>
      </div>

      <div class="analysis-form-field">
        <label for="germs">Germs:</label>
        <div class="analysis-form-dropdown">
          <button type="button" (click)="toggleDropdown('germs')" class="analysis-form-dropdown-button">
            <span class="truncate">
              {{ getSelectedGermsDisplay() }}
            </span>
            <svg xmlns="http://www.w3.org/2000/svg" class="analysis-form-dropdown-icon" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </button>
          <div *ngIf="dropdownOpen['germs']" class="analysis-form-dropdown-menu">
            <div class="analysis-form-dropdown-content">
              <label *ngFor="let germ of germs" class="analysis-form-dropdown-item">
                <input type="checkbox" [value]="germ.id" (change)="updateMultiSelect('germs', germ, $event)" 
                  [checked]="isGermSelected(germ)">
                <span>{{ germ.name }}</span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="analysis-form-field">
        <label for="interpretation">Interpretation:</label>
        <select id="interpretation" formControlName="interpretation">
          <option *ngFor="let interpretation of bacteriologyInterpretations" [ngValue]="interpretation.id">{{ interpretation.name }}</option>
        </select>
      </div>

      <div class="analysis-form-field analysis-form-comment">
        <label for="comment">Comment:</label>
        <input id="comment" type="text" formControlName="comment">
      </div>

    </div>
  </form>
</div>