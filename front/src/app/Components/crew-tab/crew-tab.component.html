<div class="medical-records-container">
  <div class="medical-records-header">
    <div class="header-content">
      <h1 class="medical-records-title">Crew Members</h1>
      <button class="btn-add" (click)="openCrewForm()" title="Add Crew Member">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
        </svg>
        Add Crew
      </button>
    </div>
  </div>

  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-text">Loading crew members...</p>
  </div>

  <div *ngIf="!isLoading && crews && crews.length > 0" class="record-section">
    <table class="record-table">
      <thead>
        <tr>
          <th>Last Name</th>
          <th>First Name</th>
          <th>Email</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let crew of crews" class="record-item">
          <td class="record-pathology">{{ crew.nom }}</td>
          <td class="record-pathology">{{ crew.prenom }}</td>
          <td>{{ crew.email }}</td>
          <td>
            <div class="medical-records-actions">
              <!-- Lock/Unlock Button -->
              <button 
                (click)="lockUnlockCrew(crew.id)"
                class="medical-record-action-button"
                [ngClass]="crew.locked ? 'medical-record-unlock-button' : 'medical-record-lock-button'"
                [title]="crew.locked ? 'Unlock' : 'Lock'"
              >
                <!-- Lock Icon (when not locked) -->
                <svg *ngIf="!crew.locked" xmlns="http://www.w3.org/2000/svg" class="medical-record-action-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
                <!-- Unlock Icon (when locked) -->
                <svg *ngIf="crew.locked" xmlns="http://www.w3.org/2000/svg" class="medical-record-action-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z" />
                </svg>
              </button>

              <!-- Delete Button -->
              <button 
                (click)="deleteCrew(crew.id)"
                class="medical-record-action-button medical-record-delete-button"
                title="Delete"
              >
                <svg xmlns="http://www.w3.org/2000/svg" class="medical-record-action-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                </svg>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!isLoading && (!crews || crews.length === 0)" class="empty-state-container">
    <svg xmlns="http://www.w3.org/2000/svg" class="empty-state-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
    </svg>
    <p class="empty-state-title">No crew members available</p>
    <p class="empty-state-subtitle">Add your first crew member to get started</p>
  </div>
</div>
